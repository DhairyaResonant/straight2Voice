<apex:page docType="html-5.0" controller="S2VVoiceMailSendPageController" standardStylesheets="false" applyBodyTag="false" cache="false" sidebar="false">
    <script src="https://cdn.ckeditor.com/4.6.2/standard/ckeditor.js"></script>
    <apex:outputPanel id="stylesform">
        <style>
        #tblFirst th{
    font-family:Salesforce Sans;
    text-align: left;
    width: 50%;
    }
    #tblFirst td{
    font-family:Salesforce Sans;
    text-align: left;
    width: 25%;
    }
    table {
        display: table;
        border-collapse: separate;
        border-spacing: 17px;
        border-color: grey;
    }
    tr {
        display: table-row;
        vertical-align: right;
        border-color: inherit;
    }
    tbody {
        display: table-row-group;
        vertical-align: right;
        border-color: inherit;
    }
    th{
        font-family:Salesforce Sans;
        text-align: left;
        
    }
    td{
        font-family:Salesforce Sans;
        text-align: left;
        
    }
    
    .bPageBlock.brandSecondaryBrd.apexDefaultPageBlock.secondaryPalette{
        background-color: white !important;
    }
    .slds-input{
        width:30%;
    }
    .mainTitle{
        font-size: 31px;
        margin-left: 27px;
    }
    
    #rcorners2 {
    border-radius: 10px;
    border: 2px solid #ff0000;
    padding: 20px; 
    width: 70%;
    height: auto;    
    }
    </style>
    
    <!-- LIGHTNING DESIGN COMPONENT FROM STATIC RESORUCE -->
        
        <apex:stylesheet value="{!URLFOR($Resource.SLDS1050, 'styles/salesforce-lightning-design-system.min.css')}" />
            <head>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"/>            
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"/>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"/>
                        <!--  jQuery -->
                        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"/>
                            <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
                                <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
                                    </head>
                                </apex:outputPanel>
                                <!-- MAIN CODE STARTS HERE -->
                                    <apex:pageMessages />
                                        <apex:form id="forms">
                                            
                                            
                                            
                                            <apex:actionStatus id="spinnerStatus" rendered="true" onstart="showSpinner();" onstop="hideSpinner();">
                                                <apex:facet name="start">
                                                    <div class="slds-spinner_container slds-hide">
                                                        <div class="slds-spinner--brand slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                                                            <div class="slds-spinner__dot-a"/>
                                                                <div class="slds-spinner__dot-b"/>
                                                                    </div>
                                                                </div>
                                                                </apex:facet>
                                                                </apex:actionStatus>
                                                                
                                                                <apex:pageBlock >
                                                                    <table>
                                                                    <tr>
                                                                    <!-- COMMAND BUTTONS -->
                                                                        <apex:pageBlockButtons >
                                                                            <center> <td class = "subbuttons">
                                                                                <apex:commandButton value="Submit" id="submit" styleClass="slds-button slds-button_brand textalignleft" style="{!IF(OR($User.UITheme == 'Theme4d',$User.UITheme == 'Theme4u'),'margin-left:75%;','margin-left:-9%;')}" action="{!saveData}"  rendered="{!NOT(isEditMode)}" status="spinnerStatus" />
                                                                                    
                                                                                    <apex:commandButton value="Update" styleClass="slds-button slds-button_brand textalignleft" style="{!IF(OR($User.UITheme == 'Theme4d',$User.UITheme == 'Theme4u'),'margin-left:75%;','margin-left:-9%;')}" action="{!saveData}" rendered="{!isEditMode}" status="spinnerStatus" />
                                                                                        </td>
                                                                                    <td class = "subbuttons">
                                                                                        <apex:commandButton value="Cancel" id="cancl" style="{!IF(OR($User.UITheme == 'Theme4d',$User.UITheme == 'Theme4u'),'margin-left:-5%;','margin-left:-96%;')}" styleClass="slds-button slds-button_destructive textalignleft" oncomplete="hide_TwoTd()"/>
                                                                                            </td></center>
                                                                                                </apex:pageBlockButtons>
                                                                                            </tr>
                                                                                            </table>
                                                                                            
                                                                                            <table id="tblFirst">
                                                                                                
                                                                                                <!-- RADIO BUTTON -->
                                                                                                    
                                                                                                    <!-- OBJECT NAMES -->
                                                                                                        
                                                                                                        <tr>
                                                                                                        <th style="padding-left: 2.5%;">
                                                                                                            Step *: Please select any one.
                                                                                                            </th>
                                                                                                            <td style="padding-right: 11.5%;" colspan="2">
                                                                                                                <apex:selectRadio styleClass="slds-radio_faux" value="{!radioValues}" id="radioValues">
                                                                                                                    <apex:selectOptions value="{!radios}"/>
                                                                                                                        <apex:actionSupport action="{!actionSave}" event="onchange" reRender="recordingid,referenceids,flds0,flds1,flds2,flds3,flds4,flds5,btnclassremove,flds,conldlookup,sms-panel1,sms-panel2,sms-panel3,pnlEmailData,sms-panel5,sms-panel6,voicemail-panel1,voicemail-panel2,voicemail-panel3,voicemail-panel4," status="spinnerStatus" oncomplete="return hideshowusr();"/>
                                                                                                                            </apex:selectRadio>
                                                                                                                        </td>
                                                                                                                        </tr>
                                                                                                                        
                                                                                                                        
                                                                                                                        <apex:outputPanel style="font-weight: bold;font-size:15px;font-family:Salesforce Sans;" rendered="{!isLoggedin}">
                                                                                                                            Note : Please login in to your s2v account before using the automation process &nbsp;&nbsp;&nbsp;
    <apex:commandButton action="{!doredirect}" styleClass="slds-button slds-button_brand textalignleft" value="Login to S2vAccount"/>
        </apex:outputPanel>
    
    <tr></tr>
    <tr>
        
        <th style="padding-left: 2.5%;">
            Step 1: Select Object (on which you wanted to automate the process)
            </th>
            <td style="padding-right: 11.5%;" colspan="2"> 
                <apex:selectList styleClass="slds-input slds-combobox__input" value="{!selectedObject}" id="objects" size="1" style="width:50%">
                    <apex:selectOptions value="{!lstObjNames}" />
                        <apex:actionSupport event="onchange" reRender="recordingid,referenceids,flds0,flds1,flds2,flds3,flds4,flds5,btnclassremove,flds,conldlookup" status="spinnerStatus" oncomplete="return hideshowusr();"/>
                            </apex:selectList>
                        </td>
                        </tr>
                        
                        <!-- WHICH FIELDS NEED TO BE SHOWN -->
                            <tr>
                            <th style="padding-left: 2.5%;"> Step 2: Please select a Type (Contact OR Lead) to whom you wanted to send voice mail </th>
                            
                            <td style="padding-right: 11.5%;" colspan="2">
                                <apex:selectList value="{!fieldsneed}" styleClass="slds-input slds-combobox__input"  id="Allflds" style="width:50%" size="1" multiselect="false">
                                    <apex:selectOption itemLabel="--None--" itemValue="0"/>
                                        <apex:selectOption itemLabel="Contact" itemValue="Contact"/>
                                            <apex:selectOption itemLabel="Lead" itemValue="Lead"/>
                                                <apex:actionSupport event="onchange" reRender="recordingid,referenceids,conldlookup" status="spinnerStatus" oncomplete="return hideshowusr();"/>
                                                    </apex:selectList>
                                                </td>
                                                </tr>
                                                
                                                <!-- WHICH LOOKUPFIELDS NEED TO BE SHOWN -->
                                                    <tr>
                                                    <th style="padding-left: 2.5%;"> Step 3: Please select the fields to whom we need to send voicemail </th>
                                                    
                                                    <td style="padding-right: 11.5%;" colspan="2">
                                                        <apex:selectList value="{!selectedLookup}" styleClass="slds-input slds-combobox__input"  id="conldlookup" style="width:50%" size="1" multiselect="false">
                                                            <apex:selectOptions value="{!Alllookupfields}"/>
                                                                
                                                                <apex:actionSupport event="onchange" reRender="recordingid,referenceids" status="spinnerStatus" oncomplete="return hideshowusr();"/>
                                                                    </apex:selectList>
                                                                </td>
                                                                </tr>
                                                                
                                                                
                                                                <!-- SMS TEMPLATE NAME rendered="{!sms}" -->
                                                                    
                                                                    
                                                                    <tr>           
                                                                    <th style="padding-left: 2.5%;">
                                                                        <apex:outputpanel id="sms-panel1">
                                                                            <div id="sms-div1" style="{!if(sms==true,'display:block;','display:none;')}"> Step *: Please Select the SMS Template </div> 
                                                                            </apex:outputpanel> 
                                                                            </th>
                                                                            
                                                                            <td style="padding-right: 11.5%;" colspan="2">
                                                                                <apex:outputpanel id="sms-panel2">
                                                                                    <div id="sms-div2" style="{!if(sms==true,'display:block;','display:none;')}">           
                                                                                        
                                                                                        <apex:selectList value="{!smstemplateID}" size="1" styleClass="slds-input slds-combobox__input" style="width:50%"  id="smsTemplateeditor" >                                                  
                                                                                            <apex:selectOptions value="{!SmsTemplates}"/>
                                                                                                <apex:actionSupport action="{!AllSmsTemplate}"  event="onchange" reRender="pnlEmailData"/>
                                                                                                    </apex:selectList>
                                                                                                </div>
                                                                                                </apex:outputpanel>            
                                                                                                </td>          
                                                                                                </tr>
                                                                                                
                                                                                                
                                                                                                <!-- SMS TEMPLATE BODY -->
                                                                                                    
                                                                                                    
                                                                                                    <tr>
                                                                                                    <th style="padding-left: 2.5%;">
                                                                                                        <apex:outputpanel id="sms-panel3">
                                                                                                            <div id="sms-div3" style="{!if(sms==true,'display:block;','display:none;')}"> Step *: SMS template body
                                                                                                            </div>
                                                                                                            </apex:outputpanel>
                                                                                                            </th>
                                                                                                            <td style="padding-right: 11.5%;" colspan="2">
                                                                                                                <apex:outputPanel id="pnlEmailData">
                                                                                                                    <div id="sms-div4" style="{!if(sms==true,'display:block;','display:none;')}">
                                                                                                                        <script type="text/javascript">
                                                                                                                            //this can also be accomplished by using an apex:actionSupport on the trigger element, calling the same function "on demand"
                                                                                                                            $(function()
                                                                                                                              {
                                                                                                                                  reloadCKEditor();
                                                                                                                              })
                                                                                                                        </script>    
    <apex:inputtextarea id="text_area_field" styleClass="ckeditor"  richtext="false" value="{!smstemplateBody}" />
    <apex:inputHidden id="hidden_text_area_field" value="{!smstemplateBody}"/> 
</div>
</apex:outputPanel>
</td>
</tr>


<!-- FIELD NAMES -->
<tr>
    <th style="padding-left: 2.5%;"> Step 4: Select User Reference fields based on the above selected type</th>
    
    <td style="padding-right: 11.5%;" colspan="2">
        <apex:selectList styleClass="slds-input slds-combobox__input" style="width:50%"   value="{!selectedField}" size="1" id="referenceids">
            <apex:selectOptions value="{!SobjectFieldNames}"/>
            <apex:actionSupport event="onchange" reRender="recordingid,fldsuser,j_id0:forms:j_id31:onrrows:0:fldsoners,forms,onrrows,stylesform,validationscript" status="spinnerStatus" oncomplete="return changestylebtn();">
                
            </apex:actionSupport>
        </apex:selectList>
    </td>
</tr>

<tr id="firstonrrow">
    <th style="padding-left: 2.5%;"> 
        <apex:outputpanel id="sms-panel5">
            <div id="sms-div5" style="{!if(sms==false,'display:block;','display:none;')}">
                Step 4A: Select Recording number which you want to send
            </div>
        </apex:outputpanel>
    </th>
    
    <td >
        <apex:outputpanel id="sms-panel6">
            <div id="sms-div6" style="{!if(sms==false,'display:block;','display:none;')}">
                <apex:selectList styleClass="slds-input slds-combobox__input" style="width:50%"   value="{!Recordingnumbers}" size="1" id="recordingnumbers">
                    <apex:selectOptions value="{!Allrecornumber}"/>
                    <apex:actionSupport event="onchange" reRender="recordingid,fldsuser,j_id0:forms:j_id31:onrrows:0:fldsoners,forms,onrrows,stylesform,validationscript" status="spinnerStatus" oncomplete="return changestylebtn();">
                    </apex:actionSupport>
                </apex:selectList>
            </div>
        </apex:outputpanel>
    </td>
    
    <td>
    </td>
</tr>



<tr>
    <th style="padding-left: 2.5%;" id = 'orid'> OR </th>
    
    <td style="padding-right: 11.5%;" colspan="2">
    </td>
</tr>

<!--SELECT THE USER -->
<tr>
    <th style="padding-left: 2.5%;" id = 'Usernameheader'> Step 4: Select Fixed users for the above Selected type</th>
    
    <td style="padding-right: 11.5%;" colspan="2">
        <apex:selectList styleClass="slds-input slds-combobox__input" style="width:50%"  value="{!selectedUser}" size="1" id="fldsuser">
            <apex:selectOptions value="{!SobjectUserNames1}"/>
            <apex:actionSupport event="onchange" reRender="recordingid" status="spinnerStatus" oncomplete="return hideshowusr();">
                <!--<apex:param assignto="{!selectedUser}" name="selecteduser" value=""/>-->
            </apex:actionSupport>
        </apex:selectList>
    </td>
</tr>

<!-- RECORDINGS -->

<tr>
    <th style="padding-left: 2.5%;" id='recordings'>
        <apex:outputpanel id="voicemail-panel1">
            <div id="voicemail-div1" style="{!if(voicemailvalue==true,'display:block;','display:none;')}"> 
                Step 4A: Select Recordings 
            </div> 
        </apex:outputpanel>
    </th>
    <td style="padding-right: 11.5%;" colspan="2">
        <apex:outputpanel id="voicemail-panel2">
            <div id="voicemail-div1" style="{!if(voicemailvalue==true,'display:block;','display:none;')}"> 
                <apex:selectList size="1" styleClass="slds-input slds-combobox__input" id="recordingid"  value="{!selectedRecordingName}" style="width:50%">
                    <apex:selectOptions value="{!Allrecornumber}"/>
                    <apex:actionSupport event="onchange"  reRender="callerid,voicemail-panel1,voicemail-panel2" status="spinnerStatus" oncomplete="return hideshowusr();"/>
                </apex:selectList>
            </div>
        </apex:outputpanel>
    </td>
</tr>



<!-- OPTION SCHEDULE -->

<tr>
    <th id="OD" style="padding-left: 2.5%;text-align: left;"> 
        <apex:outputpanel id="voicemail-panel3">
            <div id="voicemail-div1"> 
                Step 5: Option Schedule
            </div>
        </apex:outputpanel>
    </th>
    <td style="padding-right: 11.5%;" colspan="2">
        <apex:outputpanel id="voicemail-panel4">
            <div id="voicemail-div1"> 
                <apex:selectList id="OS" size="1" styleClass="slds-input slds-combobox__input"  value="{!selectedOptionschedule}" style="width:50%">
                    <apex:selectOptions value="{!ScheduleList}"/>
                    <apex:actionSupport event="onchange" action="{!enableFutureCallFields}" reRender="forms,btnclassremove,validationscript" status="spinnerStatus" oncomplete="hideshowusr();"/>
                </apex:selectList>
            </div>
        </apex:outputpanel>
    </td>
</tr>


<!-- SCHEDULE FREQUENCY -->
<tr>
    <th id="SF" style="padding-left: 4.9%; text-align: left; display: none;"> Step 5A: Schedule Frequency </th>
    <td style="padding-right: 11.5%;" colspan="2" id="SF_td">
        <apex:selectList id="scdlFreq" styleClass="slds-input slds-combobox__input"  size="1" value="{!selectedFreq}" style="display:none;width:50%">
            <apex:selectOptions value="{!ScheduleFreqList}"/>
            <apex:actionSupport event="onchange" reRender="slctdDate" status="spinnerStatus" oncomplete="hideshowusr();"/>
        </apex:selectList>
    </td> 
</tr>

<tr>
    <th id="SD" style="padding-left: 4.9%;text-align: left; display: none;">Step 5B: Schedule Date-Time</th>
    <td  id="SD_td">    
        <apex:input type="date" id="slctdDate" value="{!selectedDate}" style="display:none;width:50%;border-radius: .25rem;border: 1px solid #dddbda;padding: 0 1rem 0 .75rem;line-height: 1.875rem;
    		min-height: calc(1.875rem + (1px * 2));"/>
        
        <apex:selectList id="STL" size="1" styleClass="slds-input slds-combobox__input"  value="{!selectedTime}" style="display:none;width:30%" >
            <apex:selectOptions value="{!allAvailableTimes}"/>
        </apex:selectList>
    </td>
</tr>

<tr>
    <td colspan="3" id="help_td" style="padding-left: 4.9%;text-align: left;">
        <div id="rcorners2">
            <ul>
                <li>Daily : Send vm daily starting from selected date and time</li><br/>
                <li>Weekly : Send vm weekly(week days Calculated automatically) starting from selected date and time</li><br/>
                <li>Monthly : Send vm monthly(months Calculated automatically) starting from selected date and time</li><br/>
                <li>Year : Send vm yearly(years Calculated automatically) starting from selected date and time</li><br/>
            </ul>
        </div>
    </td>
</tr>

</table>  

<br/>
<br/>

<apex:outputPanel style="font-weight: bold;font-size:15px;font-family:Salesforce Sans;">
    Please use below filter conditions to filter records which is eligible for automation (Ex: If OpportunityAmount > 1000)
</apex:outputPanel>

<!-- FILTER CODE STARTS FROM HERE -->
<table class="declarativeFilterTable"> 
    <tbody>
        <tr>
            <th scope="col" align="center"> &nbsp;</th>
            <th scope="col" style="padding-left: 6%;"> Field</th>
            <th scope="col" style="padding-left: 6%;"> Operator</th>
            <th scope="col" style="padding-left: 6%;"> Value</th>
        </tr>
    </tbody>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input" style="width:70%"  value="{!filterValue1}" size="1" id="flds0" >
                <apex:selectOptions value="{!AllFieldNames}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop1}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput0" value="{!filtertext1}" styleClass="slds-box slds-box_xx-small" onkeyup="return hideshowusr();"/>
            AND
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input"  style="width:70%" value="{!filterValue2}" size="1" id="flds1">
                <apex:selectOptions value="{!lstAlllookuprelated}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop2}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput1" value="{!filtertext2}" styleClass="slds-box slds-box_xx-small" onkeyup="return hideshowusr();"/>
            AND
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input"  style="width:70%" value="{!filterValue3}" size="1" id="flds2" >
                <apex:selectOptions value="{!lstAlllookuprelated}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop3}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput2" value="{!filtertext3}" styleClass="slds-box slds-box_xx-small" onkeyup="return hideshowusr();"/> AND
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input" style="width:70%" value="{!filterValue4}" size="1" id="flds3" >
                <apex:selectOptions value="{!lstAlllookuprelated}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop4}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput3" value="{!filtertext4}" styleClass="slds-box slds-box_xx-small" onkeyup="return hideshowusr();"/>
            AND
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input" style="width:70%" value="{!filterValue5}" size="1" id="flds4" >
                <apex:selectOptions value="{!lstAlllookuprelated}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop5}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput4" value="{!filtertext5}" styleClass="slds-box slds-box_xx-small" onkeyup="return hideshowusr();"/> AND
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        
        <td>
            <apex:selectList styleClass="slds-input slds-combobox__input" style="width:70%" value="{!filterValue6}" size="1" id="flds5" >
                <apex:selectOptions value="{!lstAlllookuprelated}"/>
                <!-- <apex:actionSupport event="onchange" action="{!displayContacts}" reRender="" /> -->
            </apex:selectList>
        </td>
        <td>
            <apex:selectList value="{!filterop6}" styleClass="slds-input slds-combobox__input" style="width:70%" size="1" multiselect="false">
                <apex:selectOption itemLabel="Equals" itemValue="Equals"/>
                <apex:selectOption itemLabel="Not equals to" itemValue="Not equals to"/>
                <apex:selectOption itemLabel="Less than" itemValue="Less than"/>
                <apex:selectOption itemLabel="Greater than" itemValue="Greater than"/>
                <apex:selectOption itemLabel="Less or equal" itemValue="Less or equal"/>
                <apex:selectOption itemLabel="Greater or equal" itemValue="Greater or equal"/>
            </apex:selectList>
        </td>
        <td>
            <apex:inputText id="theTextInput5" value="{!filtertext6}" styleClass="slds-box slds-box_xx-small" style="margin-right:6.5%;"/>
        </td> 
    </tr>
</table>
</apex:pageBlock>
<apex:actionFunction name="saveData();" action="{!saveData}" rendered="">
    
</apex:actionFunction>

</apex:form>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js"/>

<apex:outputPanel id="btnclassremove">
    <script>
    
//CK EDITOR FOR SMS TEMPLATE
function reloadCKEditor()
{                       
    //ckeditor library does the trick by calling this method. 
    //It takes as parameter a string representing the style class to reach for, in order to enable our text area to be really #rich!                                                 
    CKEDITOR.replaceAll('ckeditor');    
}

function setCKEditorValues()
{
    //here we assign to our hidden textarea the value of the visible one  
    $("[id$='hidden_text_area_field']").val(CKEDITOR.instances[$("[id$='text_area_field']").attr('id')].getData()); 
    
}  

$(document).ready(function() {
    //$('[id*="loader"]').hide();
    $('[id*="help_td"]').hide();
    $('[id*="referenceids"]').prop( "disabled", true );
    $('[id*="Allflds"]').prop( "disabled", true );
    $('[id*="fldsuser"]').prop( "disabled", true );
    $('[id*="recordingid"]').prop( "disabled", true );
    $('[id*="fldsuser"]').prop( "disabled", true );
    $('[id*="OS"]').prop( "disabled", true );
    $('[id*="flds1"]').prop( "disabled", true );
    $('[id*="flds2"]').prop( "disabled", true );
    $('[id*="flds3"]').prop( "disabled", true );
    $('[id*="flds4"]').prop( "disabled", true );
    $('[id*="flds5"]').prop( "disabled", true );
    $('[id*="theTextInput0"]').prop( "disabled", true );
    $('[id*="theTextInput1"]').prop( "disabled", true );
    $('[id*="theTextInput2"]').prop( "disabled", true );
    $('[id*="theTextInput3"]').prop( "disabled", true );
    $('[id*="theTextInput4"]').prop( "disabled", true );
    $('[id*="theTextInput5"]').prop( "disabled", true );
    $('[id*="flds0"]').prop( "disabled", true );
    $('[id*="thirdonrrow"]').hide();
    $('[id*="fldsoners"]').prop( "disabled", true );
    $('[id*="fldsoners1"]').prop( "disabled", true );
    $('[id*="addonrs"]').prop( "disabled", true );
    $('[id*="recordingnumbers"]').prop( "disabled", true );
    $('[id*="conldlookup"]').prop( "disabled", true );
    $('[id*="recordingnumbers"]').prop( "disabled", true );
    $('[id*="conldlookup"]').prop( "disabled", true );    
    $('[id*="secondonrrow"]').hide();
    $('.btn').removeClass('btn');
    
});
</script>
</apex:outputPanel>


<apex:outputPanel id="validationscript">
    
    <script>
    
    
    $('[id*="submit"]').click(function(){
        
        console.log('----> ' + radioValues);
        setCKEditorValues();
        var obj =  $('[id*="objects"]').val();
        var usr = $('[id*="fldsoners"]').val();
        var rec1 = $('[id*="fldsoners1"]').val();
        var singleusr = $('[id*="fldsuser"]').val();
        var singleusrrec = $('[id*="recordingid"]').val();
        var schfreq = $('[id*="OS"]').val();
        var filter1 = $('[id*="flds0"]').val();
        var freqsch = $('[id*="scdlFreq"]').val();
        var schdate = $('[id*="slctdDate"]').val();
        console.log(freqsch);
        var conldlookup = $('[id*="conldlookup"]').val();
        var recordingnumbers = $('[id*="recordingnumbers"]').val();
        var referencefield = $('[id*="referenceids"]').val();
        
        var selectedDate = new Date();
        var month = ("0" + (selectedDate.getMonth() + 1)).slice(-2);
        var day = ("0" + selectedDate.getDate()).slice(-2);
        var year = selectedDate.getFullYear();
        var currdate  = [day, month, year].join('-');
        console.log(currdate);
        
        var filtercriteria = $('[id*="theTextInput0"]').val();
        var isValid = true;
        var isValidtime = true;
        
        //If SMS is selected
        if(radioValues == 'SMS'){
            if(singleusr == 0 && referencefield == 0){
                $('[id*="fldsuser"]').css({"border-color": "Red"});  
                $('[id*="referenceids"]').css({"border-color": "Red"});   
            }
        }else{
            //If Voicemail is selected
            if((singleusr == 0 && referencefield == 0) || (singleusrrec == 0 && recordingnumbers == 0)) {
                
                isValid = false;
                $('[id*="fldsuser"]').css({"border-color": "Red"});  
                $('[id*="recordingid"]').css({"border-color": "Red"});
                $('[id*="recordingnumbers"]').css({"border-color": "Red"});  
                $('[id*="referenceids"]').css({"border-color": "Red"});   
                
            }else{
                
                $('[id*="fldsuser"]').css({"border-color": "DCDCDC"});  
                $('[id*="recordingid"]').css({"border-color": "DCDCDC"});
                $('[id*="recordingnumbers"]').css({"border-color": "DCDCDC"});  
                $('[id*="referenceids"]').css({"border-color": "DCDCDC"});    
                
            }
            
           
            if(schfreq == 0){
                isValid = false;
                $('[id*="OS"]').css({"border-color": "Red"});
            } else {
                $('[id*="OS"]').css({"border-color": "#DCDCDC"});
            }
        }
        
        // For Both SMS and Voicemail    
        if(conldlookup == 0 && (obj == 'Opportunity' || obj == 'Task' || obj == 'CampaignMember')){
            isValid = false;
            $('[id*="conldlookup"]').css({"border-color": "Red"});  
        } else {
            $('[id*="conldlookup"]').css({"border-color": "#DCDCDC"});
        }
        
        if(obj == 0 ){
            isValid = false;
            $('[id*="objects"]').css({"border-color": "Red"});
        } else{
            $('[id*="objects"]').css({"border-color": "#DCDCDC"});
        }
        
        if(filter1 == 0 ){
            isValid = false;
            $('[id*="flds0"]').css({"border-color": "Red"});
        } else {
            $('[id*="flds0"]').css({"border-color": "#DCDCDC"});
        } 
        
        if(schfreq == "Future Call" && (freqsch == '0' || schdate == '')){
            isValid = false;
            $('[id*="scdlFreq"]').css({"border-color": "Red"});
            $('[id*="slctdDate"]').css({"border-color": "Red"});
        } else {
            $('[id*="scdlFreq"]').css({"border-color": "#DCDCDC"});
            $('[id*="slctdDate"]').css({"border-color": "DCDCDC"});
        } 
   
        
        if(filtercriteria != '' ){
            $('[id*="theTextInput0"]').css({"border-color": "DCDCDC"});
        }else{
            isValidtime = false
            $('[id*="theTextInput0"]').css({"border-color": "Red"}); 
        }
        
        if(isValid == true && isValidtime == true){
            return true;
        } else if(isValid == false){
            alert('Please fill mandatory fields to submit');
        } else if(isValidtime == false){
            alert('Please fill mandatory fields to submit');
        }
        
        return false;
        
    });
    </script>
</apex:outputPanel>

<script>

//Added by Yugandhara
var radioValues;
$( "[id*=radioValues]" ).click(function() {
    radioValues = $('[id*="radioValues"]:checked').val();   
});

$('[id*="removerow1"]').click(function(){
    $('[id*="secondonrrow"]').hide();
    showhideaddbtn();
    return false;
}); 

$('[id*="removerow2"]').click(function(){
    $('[id*="thirdonrrow"]').hide();
    showhideaddbtn();
    return false;
}); 

function removesecond(){
    $('[id*="secondonrrow"]').hide();
    $('[id*="fldsoners2"]').val("0") ;
    $('[id*="fldsoners3"]').val("0");
    showhideaddbtn();
}

function removethird(){
    $('[id*="thirdonrrow"]').hide();
    $('[id*="fldsoners4"]').val("0") ;
    $('[id*="fldsoners5"]').val("0");
    showhideaddbtn();    
}

function addrow(){
    var query = $('#secondonrrow');
    var isVisible = query.is(':visible');
    var userval = $('[id*="fldsoners"]').val();
    var userval2 = $('[id*="fldsoners2"]').val();
    var userval3 = $('[id*="fldsoners4"]').val();
    $('#element option[value="no"]').attr("selected", "selected");
    if(userval == 0 ){
        $('[id*="fldsoners1"]').prop( "disabled", true );
    }
    if(userval2 == 0 ){
        $('[id*="fldsoners3"]').prop( "disabled", true );
        
    } if(userval3 == 0){
        $('[id*="fldsoners5"]').prop( "disabled", true );
    }
    
    if (isVisible === true) {
        $('#thirdonrrow').show();
    }
    $('#secondonrrow').show();
    showhideaddbtn();
}

function showhideaddbtn(){
    var row2= $('#secondonrrow');
    var isVisible2 = row2.is(':visible');
    var row3= $('#thirdonrrow');
    var isVisible3 = row3.is(':visible');
    
    if(isVisible2 === true && isVisible3 === true){
        $('[id*="addonrs"]').hide();
    } else {
        $('[id*="addonrs"]').show();
    }
}

function addonerrows1(){
    addonerrow();
    return false;
}

function changestylebtn(){
    
    $('[id*="submit"]').removeClass('btn');
    $('[id*="cancl"]').removeClass('btn');
    $('[id*="removerow"]').removeClass('btn');
    $('[id*="thirdonrrow"]').hide();
    $('[id*="secondonrrow"]').hide();

    var userval = $('[id*="fldsoners"]').val();
    var row2val = $('[id*="fldsoners2"]').val();
    var row3val = $('[id*="fldsoners4"]').val();
        
    if(userval == 0 ){
        $('[id*="fldsoners1"]').prop( "disabled", true );
    } else {
        $('[id*="fldsoners1"]').prop( "disabled", false);
    }
    
    if(row2val == 0 ){
        $('[id*="fldsoners3"]').prop( "disabled", true );
    } else {
        $('[id*="fldsoners3"]').prop( "disabled", false);
    }
    
    if(row3val == 0){
        $('[id*="fldsoners5"]').prop( "disabled", true );
    } else {
        $('[id*="fldsoners5"]').prop( "disabled", false);
    }
    
    $('.btn').removeClass('btn');
    
    var row2= $('#secondonrrow');
    var isVisible2 = row2.is(':visible');
    var row3= $('#thirdonrrow');
    var isVisible3 = row3.is(':visible');
    
    if(row2val != 0 && row2val !='' && row2val !=null ){
        $('#secondonrrow').show();
    }
    
    if(row3val != 0 && row3val !='' && row3val !=null ){
        $('#thirdonrrow').show();
    }
    hideshowusr();
    return false;
}

function showSpinner(){
    $('.slds-spinner_container').removeClass('slds-hide');
    $('.slds-spinner_container').addClass('slds-show');  
    var winWidth = $(document).width();
    var winHeight = $(document).height();
    $('.slds-spinner_container').css({ 'width': winWidth,'height': winHeight });
}

function hideSpinner(){                 
    $('.slds-spinner_container').removeClass('slds-show');
    $('.slds-spinner_container').addClass('slds-hide');    
}

function showSDSF(){
    document.getElementById("SD").style.display="block";
    document.getElementById("SF").style.display="block";
    //("#SF").show();
    //alert('this');
}

function hide_TwoTd(){
    document.getElementById("SD_td").style.display="none";
    document.getElementById("SF_td").style.display="none";
    document.getElementById("help_td").style.display="none";
    document.getElementById("SD").style.display="none";
    document.getElementById("SF").style.display="none";
    document.getElementById("j_id0:forms:j_id31:objects").value = 0;
    document.getElementById('j_id0:forms:j_id31:OS').value =  0;
}

function hideSDSF(){
    var x = document.getElementById("j_id0:forms:j_id31:OS").value;
    document.getElementById("help_td").style.display="none";
    console.log(x);
    if(x == 'Now'){
        document.getElementById("SD").style.display="none";
        document.getElementById("SF").style.display="none";
        document.getElementById("help_td").style.display="none";
        $('[id*="help_td"]').hide();
    }
    else if(x == 'Future Call'){
        console.log('X call');
        document.getElementById("SD").style.display="block";
        document.getElementById("SF").style.display="block";
        document.getElementById("help_td").style.display="block";
        $('[id*="help_td"]').css({"padding-left": "4.9%","text-align": "left","width":"100%"});  
    }
    
    //("#SF").show();
    //alert('this');
    
    if($('[id*="fldsoners2"]').val() != "0" && $('[id*="fldsoners2"]').val() != null){
        $('#secondonrrow').show();
    }
    if($('[id*="fldsoners4"]').val() != "0" && $('[id*="fldsoners4"]').val() != null){
        $('#thirdonrrow').show();
    }
}

function hideUsr(){
    var x = document.getElementById("j_id0:forms:j_id31:referenceids").value;
    if(x == 0){
        document.getElementById("j_id0:forms:j_id31:fldsuser").style.display="Block";
        document.getElementById("Usernameheader").style.display="Block";
        document.getElementById("Usernameheader").style.paddingLeft = "5%";
        document.getElementById("orid").style.display="Block";
        document.getElementById("orid").style.paddingLeft = "4%";
    } else {
        document.getElementById("j_id0:forms:j_id31:fldsuser").style.display="none";
        document.getElementById("Usernameheader").style.display="none";
        document.getElementById("orid").style.display="none";
    }
}


function hideshowusr(){
    var x = $('[id*="referenceids"]').val(); 
    var objs =$('[id*="objects"]').val(); 
    var fldusrs =$('[id*="fldsuser"]').val(); 
    var allflds =$('[id*="Allflds"]').val(); 
    var subflds =$('[id*="referenceids"]').val(); 
    var fldusrs =$('[id*="fldsuser"]').val(); 
    var recrd =$('[id*="recordingid"]').val(); 
    var firstfilter = $('[id*="theTextInput0"]').val(); ;
    var secondfilter =$('[id*="theTextInput1"]').val(); 
    var thirdfilter =$('[id*="theTextInput2"]').val(); 
    var fourthfilter =$('[id*="theTextInput3"]').val();
    var fifthfilter =$('[id*="theTextInput4"]').val(); 
    var fldvalue  =$('[id*="referenceids"]').val(); 
    var userval = $('[id*="fldsoners1"]').val();
    var userval2 = $('[id*="fldsoners3"]').val();
    var userval3 = $('[id*="fldsoners5"]').val();
    var userval0 = $('[id*="fldsoners"]').val();
    var freqsch = $('[id*="OS"]').val();
    
    if(freqsch == 'Future Call'){
        console.log('future call 1033');
        $('[id*="scdlFreq"]').show();
        $('[id*="STL"]').show();
        $('[id*="slctdDate"]').show();
    } else {
        console.log('hide date');
        $('[id*="scdlFreq"]').hide();
        $('[id*="STL"]').hide();
        $('[id*="slctdDate"]').hide();
    }
    
    document.getElementById("help_td").style.display="none";
    var freq =$('[id*="OS"]').val(); 
    document.getElementById("help_td").style.display="none";
    console.log(x);
    if(freq  == 'Now'){
        document.getElementById("SD").style.display="none";
        document.getElementById("SF").style.display="none";
        document.getElementById("help_td").style.display="none";
        $('[id*="help_td"]').hide();
    }
    
    if(freq  == 'Future Call'){
        console.log('1062 future');
        document.getElementById("SD").style.display="block";
        document.getElementById("SF").style.display="block";
        document.getElementById("help_td").style.display="block";
        $('[id*="help_td"]').css({"padding-left": "4.9%","text-align": "left","width":"100%"});
    }
    
    
    if(fldvalue != 0 && fldvalue != '' && fldvalue != null){
        $('[id*="fldsoners"]').prop( "disabled", false);
        if(userval0 == 0){
            $('[id*="fldsoners1"]').prop( "disabled", true);
        } else {
            $('[id*="fldsoners1"]').prop( "disabled", false);
        }
        $('[id*="addonrs"]').prop( "disabled", false);
    } else {
        $('[id*="fldsoners"]').prop( "disabled", true);
        $('[id*="fldsoners"]').val("0");
        $('[id*="fldsoners1"]').val("0");
        $('[id*="fldsoners1"]').prop( "disabled", true);
        $('[id*="addonrs"]').prop( "disabled", true);
    }
    if(firstfilter != ''){
        $('[id*="flds1"]').prop( "disabled", false);
        $('[id*="theTextInput1"]').prop( "disabled", false);
    } else {
        $('[id*="flds1"]').prop( "disabled", true);
        $('[id*="flds2"]').prop( "disabled", true);
        $('[id*="flds3"]').prop( "disabled", true);
        $('[id*="flds4"]').prop( "disabled", true);
        $('[id*="flds5"]').prop( "disabled", true);
        
        $('[id*="theTextInput1"]').prop( "disabled", true);
        $('[id*="theTextInput2"]').prop( "disabled", true);
        $('[id*="theTextInput3"]').prop( "disabled", true);
        $('[id*="theTextInput4"]').prop( "disabled", true);
        $('[id*="theTextInput5"]').prop( "disabled", true);
        
        $('[id*="theTextInput1"]').val('');
        $('[id*="theTextInput2"]').val('');
        $('[id*="theTextInput3"]').val('');
        $('[id*="theTextInput4"]').val('');
        $('[id*="theTextInput5"]').val('');
        
    }
    
    if(secondfilter != ''){
        $('[id*="flds2"]').prop( "disabled", false);
        $('[id*="theTextInput2"]').prop( "disabled", false);
    } else {
        $('[id*="flds2"]').prop( "disabled", true);
        $('[id*="flds3"]').prop( "disabled", true);
        $('[id*="flds4"]').prop( "disabled", true);
        $('[id*="flds5"]').prop( "disabled", true);
        
        $('[id*="theTextInput2"]').prop( "disabled", true);
        $('[id*="theTextInput3"]').prop( "disabled", true);
        $('[id*="theTextInput4"]').prop( "disabled", true);
        $('[id*="theTextInput5"]').prop( "disabled", true);
        
        $('[id*="theTextInput2"]').val('');
        $('[id*="theTextInput3"]').val('');
        $('[id*="theTextInput4"]').val('');
        $('[id*="theTextInput5"]').val('');
    }
    
    if(thirdfilter != ''){
        $('[id*="flds3"]').prop( "disabled", false);
        $('[id*="theTextInput3"]').prop( "disabled", false);
    } else {
        $('[id*="flds3"]').prop( "disabled", true);
        $('[id*="flds4"]').prop( "disabled", true);
        $('[id*="flds5"]').prop( "disabled", true);
        
        $('[id*="theTextInput3"]').prop( "disabled", true);
        $('[id*="theTextInput4"]').prop( "disabled", true);
        $('[id*="theTextInput5"]').prop( "disabled", true);
        
        $('[id*="theTextInput3"]').val('');
        $('[id*="theTextInput4"]').val('');
        $('[id*="theTextInput5"]').val('');
    }
    
    if(fourthfilter != ''){
        $('[id*="flds4"]').prop( "disabled", false);
        $('[id*="theTextInput4"]').prop( "disabled", false);
    } else {
        $('[id*="flds4"]').prop( "disabled", true);
        $('[id*="flds5"]').prop( "disabled", true);
        
        $('[id*="theTextInput4"]').prop( "disabled", true);
        $('[id*="theTextInput5"]').prop( "disabled", true);
        
        $('[id*="theTextInput4"]').val('');
        $('[id*="theTextInput5"]').val('');
    }
    
    if(fifthfilter != ''){
        $('[id*="flds5"]').prop( "disabled", false);
        $('[id*="theTextInput5"]').prop( "disabled", false);
    } else {
        
        $('[id*="flds5"]').prop( "disabled", true);
        
        $('[id*="theTextInput5"]').prop( "disabled", true);
        
        $('[id*="theTextInput5"]').val('');
    }
    
    if(subflds == 0 && fldusrs == 0){
        $('[id*="recordingid"]').prop( "disabled", true);
    } else if(objs != 0){
        $('[id*="recordingid"]').prop( "disabled", false);
        
    }
    
    if(x == 0){
        $('[id*="fldsuser"]').show();
        document.getElementById("Usernameheader").style.display="Block";
        document.getElementById("orid").style.display="Block";
        document.getElementById("Usernameheader").style.paddingLeft = "5%";
        document.getElementById("orid").style.paddingLeft = "4%";
        //$('[id*="recordingid"]').prop( "disabled", false);
        $('[id*="fldsoners"]').val("0") ;
        $('[id*="fldsoners1"]').val("0") ;
        $('[id*="fldsoners2"]').val("0") ;
        $('[id*="fldsoners3"]').val("0") ;
        $('[id*="fldsoners4"]').val("0") ;
        $('[id*="fldsoners5"]').val("0") ;
        $('[id*="recordingid"]').show();
        $('[id*="recordings"]').show();
        $('[id*="recordingnumbers"]').prop( "disabled", true );
        $('[id*="recordingnumbers"]').val( "0" );
    } else {
        $('[id*="recordingnumbers"]').prop( "disabled", false );
        $('[id*="recordingid"]').hide();
        
        $('[id*="fldsuser"]').hide();
        document.getElementById("Usernameheader").style.display="none";
        
        $('[id*="recordings"]').hide();
        $('[id*="orid"]').hide();
        
        $('[id*="recordingid"]').prop( "disabled", true);
        $('[id*="recordingid"]').val( "0");
        $('[id*="fldsuser"]').val( "0");
    }
    
    if(objs == 0){
        $('[id*="Allflds"]').prop( "disabled", true);
        $('[id*="referenceids"]').prop( "disabled", true);
        $('[id*="fldsuser"]').prop( "disabled", true);
        $('[id*="flds0"]').prop( "disabled", true);
        $('[id*="theTextInput0"]').prop( "disabled", true);
        $('[id*="theTextInput0"]').val('');
        $('[id*="recordingid"]').prop( "disabled", true);
        $('[id*="conldlookup"]').prop( "disabled", false );
        
    } else if(objs == 'Contact' || objs == 'Lead'){
        
        $('[id*="Allflds"]').prop( "disabled", true);
        $('[id*="Allflds"]').val( "0");
        $('[id*="referenceids"]').prop( "disabled", false);
        $('[id*="fldsuser"]').prop( "disabled", false);
        $('[id*="flds0"]').prop( "disabled", false);
        $('[id*="theTextInput0"]').prop( "disabled", false);
        $('[id*="recordingid"]').prop( "disabled", false);
        $('[id*="conldlookup"]').prop( "disabled", true );
        $('[id*="conldlookup"]').val( "0" );
        $('[id*="OS"]').prop( "disabled", false );

    } else{
        
        $('[id*="Allflds"]').prop( "disabled", false);
        $('[id*="referenceids"]').prop( "disabled", false);
        $('[id*="fldsuser"]').prop( "disabled", false);
        $('[id*="flds0"]').prop( "disabled", false);
        $('[id*="theTextInput0"]').prop( "disabled", false);
        $('[id*="recordingid"]').prop( "disabled", false);        
        $('[id*="conldlookup"]').prop( "disabled", false);
        $('[id*="OS"]').prop( "disabled", false );
    }
        
  }

</script>
</apex:page>